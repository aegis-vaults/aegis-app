# Railway Nixpacks configuration for aegis-app
# Minimal config without USB/hardware wallet support (not needed for cloud deployment)

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
# Skip optional dependencies and ignore build scripts to avoid USB native build issues
# USB is not needed for cloud deployment (Phantom/Solflare wallets don't require it)
# --ignore-scripts skips node-gyp builds that require Python
cmds = ["npm ci --omit=optional --ignore-scripts"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "npm start"
